<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Split PDF - PDF Pro</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <style>
        .material-symbols-outlined {
            font-variation-settings:
                'FILL' 0,
                'wght' 400,
                'GRAD' 0,
                'opsz' 24
        }

        canvas {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
    </style>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#4F46E5",
                        "primary-gradient-to": "#7C3AED",
                        "background-light": "#F9FAFB",
                        "background-dark": "#111827",
                        "surface-light": "#FFFFFF",
                        "surface-dark": "#1F2937",
                        "text-light": "#111827",
                        "text-dark": "#D1D5DB",
                        "text-secondary-light": "#6B7280",
                        "text-secondary-dark": "#9CA3AF",
                        "border-light": "#E5E7EB",
                        "border-dark": "#374151",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "0.75rem",
                        "xl": "1rem",
                        "full": "9999px"
                    },
                },
            },
        }
        // Configure PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
</head>

<body class="font-display bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark">
    <div class="flex h-screen w-full">
        <!-- SideNavBar -->
        <aside
            class="flex h-full w-64 flex-col justify-between border-r border-border-light dark:border-border-dark bg-surface-light dark:bg-surface-dark p-4 shrink-0">
            <div class="flex flex-col gap-4">
                <div class="flex items-center gap-3 px-2">
                    <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10"
                        data-alt="PDF Pro Application Logo"
                        style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBnAQVnaDXGlB-00UjgA701wBDuBg_O3FephTGZhholNDYMC787GWt_XHLN3BjmUd1mkG45X_dw5FBbrn8-oUWu34AGTSbZONRRGHIUQIDVA613Z78DURh3goAMxAFiKq89GX0W9MsV-kg5oLfhCzgEsLOe3FhcIWqCIuUBphUONY_VGJfY2mZ-s4cEDIMiUaYNrAH7Ypl4ySTgG7tqOEmpDiqqx1HDIo8JpBpattd2nuNv7W7tDluRVkZUnUcF8Enuw73usJ-H4R4");'>
                    </div>
                    <div class="flex flex-col">
                        <h1 class="text-base font-bold">PDF Pro</h1>
                        <p class="text-sm text-text-secondary-light dark:text-text-secondary-dark">Your PDF Toolkit</p>
                    </div>
                </div>
                <nav class="flex flex-col gap-1 mt-4">
                    <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors cursor-pointer"
                        onclick="window.pywebview.api.navigate('index')">
                        <span
                            class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark">home</span>
                        <p class="text-sm font-medium text-text-light dark:text-text-dark" data-i18n="home">Home</p>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors"
                        href="#">
                        <span
                            class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark">call_merge</span>
                        <p class="text-sm font-medium text-text-light dark:text-text-dark" data-i18n="mergePdf">Merge PDF</p>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2 rounded-lg bg-primary/10 dark:bg-primary/20" href="#">
                        <span class="material-symbols-outlined text-primary">call_split</span>
                        <p class="text-sm font-medium text-primary" data-i18n="splitPdf">Split PDF</p>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors"
                        href="#">
                        <span
                            class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark">compress</span>
                        <p class="text-sm font-medium text-text-light dark:text-text-dark" data-i18n="compressPdf">Compress PDF</p>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors"
                        href="#">
                        <span
                            class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark">image</span>
                        <p class="text-sm font-medium text-text-light dark:text-text-dark" data-i18n="imageToPdf">Image to PDF</p>
                    </a>
                    <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors"
                        href="#">
                        <span
                            class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark">match_case</span>
                        <p class="text-sm font-medium text-text-light dark:text-text-dark" data-i18n="pdfToText">PDF to Text</p>
                    </a>
                </nav>
            </div>
            <div class="flex flex-col gap-1">
                <button id="lang-toggle"
                    class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors cursor-pointer">
                    <span class="text-sm font-bold text-text-secondary-light dark:text-text-secondary-dark" id="lang-icon">TR</span>
                    <p class="text-sm font-medium" data-i18n="language">Language</p>
                </button>
                <button id="theme-toggle"
                    class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors cursor-pointer">
                    <span class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark"
                        id="theme-icon">dark_mode</span>
                    <p class="text-sm font-medium" data-i18n="darkMode">Dark Mode</p>
                    <div
                        class="ml-auto relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-gray-700 transition-colors">
                        <span class="sr-only">Enable dark mode</span>
                        <span id="theme-switch-knob"
                            class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform translate-x-1 dark:translate-x-6"></span>
                    </div>
                </button>
                <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors"
                    href="#">
                    <span
                        class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark">settings</span>
                    <p class="text-sm font-medium text-text-light dark:text-text-dark" data-i18n="settings">Settings</p>
                </a>
                <a class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors"
                    href="#">
                    <span
                        class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark">help</span>
                    <p class="text-sm font-medium text-text-light dark:text-text-dark" data-i18n="help">Help</p>
                </a>
            </div>
        </aside>
        <!-- Main Content Area -->
        <main class="flex-1 flex flex-col h-screen overflow-hidden">
            <!-- PageHeading -->
            <header class="p-8 border-b border-border-light dark:border-border-dark shrink-0">
                <div class="flex flex-wrap justify-between items-center gap-3">
                    <div class="flex min-w-72 flex-col gap-1">
                        <p class="text-3xl font-bold leading-tight text-text-light dark:text-text-dark" data-i18n="splitPdfTitle">Split PDF</p>
                        <p
                            class="text-text-secondary-light dark:text-text-secondary-dark text-base font-normal leading-normal" data-i18n="splitPdfDesc">
                            Select pages and choose a splitting method to create new PDF files.</p>
                    </div>
                </div>
            </header>
            <div class="flex flex-1 overflow-hidden">
                <!-- Left Column: File Preview -->
                <div class="flex-1 p-8 overflow-y-auto">
                    <!-- EmptyState (initial view) -->
                    <div id="emptyState"
                        class="flex flex-col items-center justify-center gap-6 rounded-lg border-2 border-dashed border-border-light dark:border-border-dark p-14 h-full">
                        <div class="flex flex-col items-center gap-2">
                            <span
                                class="material-symbols-outlined text-5xl text-text-secondary-light dark:text-text-secondary-dark">upload_file</span>
                            <p class="text-lg font-bold text-text-light dark:text-text-dark" data-i18n="dragDropPdf">Drag & Drop PDF here</p>
                            <p class="text-sm text-text-secondary-light dark:text-text-secondary-dark" data-i18n="orBrowseFiles">or browse files
                                to get started</p>
                        </div>
                        <button onclick="selectPDF()"
                            class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary text-white text-sm font-bold leading-normal tracking-wide bg-gradient-to-r from-primary to-primary-gradient-to shadow-sm">
                            <span class="truncate" data-i18n="browseFiles">Browse Files</span>
                        </button>
                    </div>

                    <!-- Active State: Page Thumbnail Grid -->
                    <div id="activeState" class="hidden flex-col gap-6">
                        <div class="flex justify-between items-center">
                            <h3 class="font-bold text-lg" id="fileName">sample-document.pdf</h3>
                            <button onclick="clearFile()"
                                class="flex items-center gap-2 min-w-[84px] cursor-pointer justify-center overflow-hidden rounded-lg h-9 px-3 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark text-text-light dark:text-text-dark text-sm font-medium leading-normal shadow-sm hover:bg-black/5 dark:hover:bg-white/5">
                                <span class="material-symbols-outlined text-base">close</span>
                                <span class="truncate" data-i18n="clearFile">Clear File</span>
                            </button>
                        </div>
                        <div id="pageGrid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
                            <!-- Pages will be injected here -->
                        </div>
                    </div>
                </div>
                <!-- Right Column: Options Panel -->
                <aside
                    class="w-96 border-l border-border-light dark:border-border-dark bg-surface-light dark:bg-surface-dark flex flex-col shrink-0">
                    <div class="flex-1 p-6 space-y-6 overflow-y-auto">
                        <!-- SectionHeader -->
                        <h2 class="text-xl font-bold leading-tight text-text-light dark:text-text-dark" data-i18n="splitOptions">Split Options</h2>
                        <!-- RadioList -->
                        <div class="flex flex-col gap-3">
                            <label
                                class="flex items-start gap-4 rounded-lg border border-primary p-4 cursor-pointer bg-primary/5 dark:bg-primary/10">
                                <input checked=""
                                    class="mt-1 h-5 w-5 border-2 border-border-light dark:border-border-dark bg-transparent text-primary focus:ring-primary checked:border-primary"
                                    name="split_option" type="radio" value="range" />
                                <div class="flex grow flex-col">
                                    <p class="text-sm font-medium text-text-light dark:text-text-dark" data-i18n="splitByPageRange">Split by page range</p>
                                    <p
                                        class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-normal" data-i18n="splitByPageRangeDesc">
                                        Create one PDF from a specific range of pages.</p>
                                </div>
                            </label>
                            <!-- Other options disabled for now as they require more complex logic -->
                            <label
                                class="flex items-start gap-4 rounded-lg border border-border-light dark:border-border-dark p-4 cursor-pointer hover:border-primary/50 dark:hover:border-primary/50 opacity-50">
                                <input disabled
                                    class="mt-1 h-5 w-5 border-2 border-border-light dark:border-border-dark bg-transparent text-primary focus:ring-primary checked:border-primary"
                                    name="split_option" type="radio" value="fixed" />
                                <div class="flex grow flex-col">
                                    <p class="text-sm font-medium text-text-light dark:text-text-dark" data-i18n="splitIntoFixedRanges">Split into fixed ranges</p>
                                    <p
                                        class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-normal" data-i18n="splitIntoFixedRangesDesc">
                                        Divide the PDF into multiple files of N pages each. (Coming Soon)</p>
                                </div>
                            </label>
                            <label
                                class="flex items-start gap-4 rounded-lg border border-border-light dark:border-border-dark p-4 cursor-pointer hover:border-primary/50 dark:hover:border-primary/50 opacity-50">
                                <input disabled
                                    class="mt-1 h-5 w-5 border-2 border-border-light dark:border-border-dark bg-transparent text-primary focus:ring-primary checked:border-primary"
                                    name="split_option" type="radio" value="extract" />
                                <div class="flex grow flex-col">
                                    <p class="text-sm font-medium text-text-light dark:text-text-dark" data-i18n="extractSelectedPages">Extract selected pages</p>
                                    <p
                                        class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-normal" data-i18n="extractSelectedPagesDesc">
                                        Create a new PDF from individually selected pages. (Coming Soon)</p>
                                </div>
                            </label>
                        </div>
                        <!-- Mode-specific controls -->
                        <div class="border-t border-border-light dark:border-border-dark pt-6 space-y-4">
                            <label class="block text-sm font-medium text-text-light dark:text-text-dark"
                                for="page-range" data-i18n="pageRanges">Page Ranges</label>
                            <input
                                class="w-full rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark p-2 focus:ring-primary focus:border-primary text-sm text-text-light dark:text-text-dark"
                                id="page-range" name="page-range" placeholder="e.g., 1-5, 8, 10-12" type="text" />
                            <p class="text-xs text-text-secondary-light dark:text-text-secondary-dark" data-i18n="pageRangesDesc">Use commas to
                                separate page numbers or ranges.</p>
                            <!-- Error state -->
                            <div id="rangeError" class="hidden items-center gap-2 text-red-500">
                                <span class="material-symbols-outlined text-base">error</span>
                                <p class="text-xs" data-i18n="invalidRangeFormat">Invalid range format.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Action Area -->
                    <div class="p-6 border-t border-border-light dark:border-border-dark mt-auto space-y-4">
                        <button onclick="splitPDF()"
                            class="w-full flex cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-4 bg-primary text-white text-base font-bold tracking-wide bg-gradient-to-r from-primary to-primary-gradient-to shadow-lg shadow-primary/30 hover:shadow-xl hover:shadow-primary/40 transition-shadow">
                            <span class="truncate" data-i18n="splitPdf">Split PDF</span>
                        </button>
                        <p id="statusMessage"
                            class="text-center text-sm text-text-secondary-light dark:text-text-secondary-dark"></p>
                    </div>
                </aside>
            </div>
        </main>
    </div>

    <script>
        // Language translations
        const translations = {
            en: {
                language: 'Language',
                darkMode: 'Dark Mode',
                home: 'Home',
                mergePdf: 'Merge PDF',
                splitPdf: 'Split PDF',
                compressPdf: 'Compress PDF',
                imageToPdf: 'Image to PDF',
                pdfToText: 'PDF to Text',
                settings: 'Settings',
                help: 'Help',
                splitPdfTitle: 'Split PDF',
                splitPdfDesc: 'Select pages and choose a splitting method to create new PDF files.',
                dragDropPdf: 'Drag & Drop PDF here',
                orBrowseFiles: 'or browse files to get started',
                browseFiles: 'Browse Files',
                clearFile: 'Clear File',
                splitOptions: 'Split Options',
                splitByPageRange: 'Split by page range',
                splitByPageRangeDesc: 'Create one PDF from a specific range of pages.',
                splitIntoFixedRanges: 'Split into fixed ranges',
                splitIntoFixedRangesDesc: 'Divide the PDF into multiple files of N pages each. (Coming Soon)',
                extractSelectedPages: 'Extract selected pages',
                extractSelectedPagesDesc: 'Create a new PDF from individually selected pages. (Coming Soon)',
                pageRanges: 'Page Ranges',
                pageRangesDesc: 'Use commas to separate page numbers or ranges.',
                invalidRangeFormat: 'Invalid range format.'
            },
            tr: {
                language: 'Dil',
                darkMode: 'Karanlık Mod',
                home: 'Ana Sayfa',
                mergePdf: 'PDF Birleştir',
                splitPdf: 'PDF Böl',
                compressPdf: 'PDF Sıkıştır',
                imageToPdf: 'Resimden PDF',
                pdfToText: 'PDF\'den Metin',
                settings: 'Ayarlar',
                help: 'Yardım',
                splitPdfTitle: 'PDF Böl',
                splitPdfDesc: 'Sayfaları seçin ve yeni PDF dosyaları oluşturmak için bir bölme yöntemi seçin.',
                dragDropPdf: 'PDF\'yi buraya sürükleyip bırakın',
                orBrowseFiles: 'veya başlamak için dosyalara göz atın',
                browseFiles: 'Dosya Seç',
                clearFile: 'Dosyayı Temizle',
                splitOptions: 'Bölme Seçenekleri',
                splitByPageRange: 'Sayfa aralığına göre böl',
                splitByPageRangeDesc: 'Belirli bir sayfa aralığından tek bir PDF oluşturun.',
                splitIntoFixedRanges: 'Sabit aralıklara böl',
                splitIntoFixedRangesDesc: 'PDF\'yi her biri N sayfadan oluşan birden fazla dosyaya bölün. (Yakında)',
                extractSelectedPages: 'Seçili sayfaları çıkar',
                extractSelectedPagesDesc: 'Ayrı ayrı seçilen sayfalardan yeni bir PDF oluşturun. (Yakında)',
                pageRanges: 'Sayfa Aralıkları',
                pageRangesDesc: 'Sayfa numaralarını veya aralıklarını ayırmak için virgül kullanın.',
                invalidRangeFormat: 'Geçersiz aralık formatı.'
            }
        };

        // Language Logic
        const langToggleBtn = document.getElementById('lang-toggle');
        const langIcon = document.getElementById('lang-icon');
        
        function updateLanguageUI(lang) {
            langIcon.textContent = lang === 'tr' ? 'EN' : 'TR';
        }

        function setLanguage(lang) {
            const elements = document.querySelectorAll('[data-i18n]');
            elements.forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
            localStorage.setItem('language', lang);
            updateLanguageUI(lang);
        }

        const savedLang = localStorage.getItem('language') || 'en';
        setLanguage(savedLang);

        langToggleBtn.addEventListener('click', () => {
            const currentLang = localStorage.getItem('language') || 'en';
            const newLang = currentLang === 'en' ? 'tr' : 'en';
            setLanguage(newLang);
        });

        // Dark Mode Logic
        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const themeSwitchKnob = document.getElementById('theme-switch-knob');
        const htmlElement = document.documentElement;

        function updateThemeUI(isDark) {
            if (isDark) {
                themeIcon.textContent = 'light_mode';
                themeSwitchKnob.classList.remove('translate-x-1');
                themeSwitchKnob.classList.add('translate-x-6');
            } else {
                themeIcon.textContent = 'dark_mode';
                themeSwitchKnob.classList.remove('translate-x-6');
                themeSwitchKnob.classList.add('translate-x-1');
            }
        }

        const savedTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
            htmlElement.classList.add('dark');
            updateThemeUI(true);
        } else {
            htmlElement.classList.remove('dark');
            updateThemeUI(false);
        }

        themeToggleBtn.addEventListener('click', () => {
            if (htmlElement.classList.contains('dark')) {
                htmlElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
                updateThemeUI(false);
            } else {
                htmlElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
                updateThemeUI(true);
            }
        });

        // Application Logic
        let selectedFile = null;
        let totalPagesCount = 0;
        let pdfDoc = null;

        async function selectPDF() {
            if (window.pywebview && window.pywebview.api) {
                const files = await window.pywebview.api.select_files(null, false);
                if (files && files.length > 0) {
                    selectedFile = files[0];
                    await loadPDFPages();
                }
            } else {
                console.log("Pywebview API not available");
            }
        }

        async function loadPDFPages() {
            if (!selectedFile || !window.pywebview || !window.pywebview.api) return;

            try {
                const info = await window.pywebview.api.get_pdf_info(selectedFile);
                if (!info.success) {
                    alert('Error loading PDF: ' + info.error);
                    return;
                }

                totalPagesCount = info.page_count;
                const fileName = selectedFile.split('/').pop();
                document.getElementById('fileName').textContent = fileName;

                // Switch views
                document.getElementById('emptyState').classList.add('hidden');
                document.getElementById('activeState').classList.remove('hidden');
                document.getElementById('activeState').classList.add('flex');

                // Get PDF data
                const pdfData = await window.pywebview.api.get_pdf_data(selectedFile);
                if (!pdfData.success) {
                    alert('Error getting PDF data: ' + pdfData.error);
                    return;
                }

                // Load PDF
                const pdfBytes = atob(pdfData.data);
                const pdfArray = new Uint8Array(pdfBytes.length);
                for (let i = 0; i < pdfBytes.length; i++) {
                    pdfArray[i] = pdfBytes.charCodeAt(i);
                }

                pdfDoc = await pdfjsLib.getDocument({ data: pdfArray }).promise;
                await renderPages();

            } catch (error) {
                alert('Error: ' + error);
                console.error(error);
            }
        }

        async function renderPages() {
            const grid = document.getElementById('pageGrid');
            grid.innerHTML = '';

            for (let i = 1; i <= totalPagesCount; i++) {
                // Container
                const pageContainer = document.createElement('div');
                pageContainer.className = 'relative group cursor-pointer';

                // Aspect ratio box
                const aspectBox = document.createElement('div');
                aspectBox.className = 'aspect-[3/4] bg-surface-light dark:bg-surface-dark rounded-lg border-2 border-transparent ring-1 ring-border-light dark:ring-border-dark group-hover:scale-105 transition-transform duration-200 overflow-hidden';

                // Canvas
                const page = await pdfDoc.getPage(i);
                const viewport = page.getViewport({ scale: 0.5 });
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.height = viewport.height;
                canvas.width = viewport.width;

                await page.render({
                    canvasContext: context,
                    viewport: viewport
                }).promise;

                aspectBox.appendChild(canvas);
                pageContainer.appendChild(aspectBox);

                // Page Number
                const pageNum = document.createElement('div');
                pageNum.className = 'absolute top-2 left-2 size-5 bg-primary text-white flex items-center justify-center rounded-full text-xs font-bold';
                pageNum.textContent = i;
                pageContainer.appendChild(pageNum);

                grid.appendChild(pageContainer);
            }
        }

        function clearFile() {
            selectedFile = null;
            totalPagesCount = 0;
            pdfDoc = null;
            document.getElementById('activeState').classList.add('hidden');
            document.getElementById('activeState').classList.remove('flex');
            document.getElementById('emptyState').classList.remove('hidden');
            document.getElementById('pageGrid').innerHTML = '';
            document.getElementById('page-range').value = '';
        }

        async function splitPDF() {
            if (!selectedFile) {
                alert('Please select a PDF file first.');
                return;
            }

            const rangeInput = document.getElementById('page-range').value.trim();
            if (!rangeInput) {
                document.getElementById('rangeError').classList.remove('hidden');
                return;
            }
            document.getElementById('rangeError').classList.add('hidden');

            // Parse ranges (simple split by comma)
            const ranges = rangeInput.split(',').map(r => r.trim()).filter(r => r);

            if (window.pywebview && window.pywebview.api) {
                try {
                    document.getElementById('statusMessage').textContent = "Processing...";
                    const result = await window.pywebview.api.split_pdf(selectedFile, ranges);

                    if (result.success) {
                        document.getElementById('statusMessage').textContent = result.message;
                        document.getElementById('statusMessage').className = "text-center text-sm text-green-500 font-medium";
                    } else {
                        document.getElementById('statusMessage').textContent = "Error: " + result.error;
                        document.getElementById('statusMessage').className = "text-center text-sm text-red-500 font-medium";
                    }
                } catch (error) {
                    document.getElementById('statusMessage').textContent = "Error: " + error;
                }
            }
        }
    </script>
</body>

</html>